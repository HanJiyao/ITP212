<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:p="http://primefaces.org/ui">

<f:metadata>
    <f:event type="preRenderView" listener="#{reviewController.loadReviews()}"/>
</f:metadata>

<h:head>
    <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"/>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

    <title>Update Review</title>
</h:head>

<h:body>

    <ui:composition template="../templates/template.xhtml">
        <ui:define name="content">

        <h:messages globalOnly="true" id="msg" />

        <h:form id="form" style="margin-top: 10px;" >
            <h:panelGrid columns="3">

                <h:outputLabel>Display Name:</h:outputLabel> <p:inputText value="#{review.displayName}" id="dnEdit"/> <h:message for="dnEdit" />

                <h:outputLabel>Rating:</h:outputLabel><p:rating value="#{review.rating}" id="rateEdit" update=":displayEdit:cc"/> <h:message for="rateEdit" />

                <h:outputLabel>Review:</h:outputLabel> <p:inputText value="#{review.reviewText}" id="reviewEdit" /> <h:message for="reviewEdit" />

                <h:inputHidden value="#{review.id}" />

            </h:panelGrid>

            <!--<p:remoteCommand name="rc" update=":displayEdit"/>-->
            <p:commandButton type="button" onclick="PF('display').show();" action="#{reviewController.updateReview(review)}" update=":displayEdit" value="Update"/>
            <!--<p:commandButton value="Update" styleClass="save" oncomplete="PF('showReview').show(); "/>-->
        </h:form>
            <br/>
            <!--<p:dialog header="Your Updated Review:" widgetVar="showReview" id="showReview" appendTo="@(body)" modal="false">-->
            <p:panel widgetVar="display" visible="false" closable="true" toggleable="true" layout="block">
        <h:form id="displayEdit">
            <h:inputHidden value="review.id}" />
            <h:outputText id="cc" value="#{review.reviewText}" />
            <p:commandButton value="Confirm" action="#{reviewController.updateReview(review)}"/>
            <p:commandButton value="Cancel" onclick="PF('showReview').hide();" />
            <h:outputText value="pls show" />
        </h:form>
            </p:panel>
    <!--</p:dialog>-->
        </ui:define>
    </ui:composition>
</h:body>
</html>
